!function(){"use strict";function a(a){return"[object Date]"===Object.prototype.toString.call(a)}function b(a){return new Date(a.setHours(0,0,0,0))}function c(a,b){return new Date(a.valueOf()+24*b*60*60*1e3)}function d(a,b,c,e){return"object"==typeof a?d(a.r,a.g,a.b,b||1):"rgba("+a+", "+b+", "+c+", "+e+")"}function e(a){var b=a.clone();b.css({position:"absolute",visibility:"hidden",display:"inline-block"}),$(document.body).append(b);var c=b.width();return b.remove(),c}var f={pt:{daysOfWeek:["SEG","TER","QUA","QUI","SEX","SAB","DOM"],months:["JAN","FEV","MAR","ABR","MAI","JUN","JUL","AGO","SET","OUT","NOV","DEZ"]},en:{daysOfWeek:["MON","TUE","WED","THU","FRI","SAT","SUN"],months:["JAN","FEV","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]}};$.fn.gammacalendar=function(g,h){h=$.extend(!0,{baseColor:{r:0,g:136,b:204},nullColor:{r:238,g:238,b:238},weeks:4,i18n:f.en,startOnSunday:!1,highlightToday:!0},h),"string"==typeof h.i18n&&(h.i18n=f[h.i18n]);var i,j=b(new Date);this.addClass("gammacalendar"),g.length>1?(g.sort(function(b,c){return a(b.date)||(b.date=new Date(b.date)),a(c.date)||(c.date=new Date(c.date)),c.date-b.date}),i=g.reduce(function(a,b){return{value:a.value>b.value?a.value:b.value}}).value):1===g.length?(a(g[0].date)||(g[0].date=new Date(g[0].date)),i=g[0].value):i=1,i=0===i?1:i;var k=g.length>0?g[0].date:new Date,l=(h.startOnSunday?6:7)-k.getDay(),m=b(c(k,l)),n=m,o=$("<div />"),p=$('<div class="months" />'),q=$('<div class="weeks" />'),r=$('<div class="calendar" />');r.append(p),r.append($('<br class="clear" />')),r.append(q),o.append(r);for(var s=0;s<h.weeks;s++){for(var t=$('<div class="week" />'),u=null,v=0;7>v;v++){var w=null;if(g.length>0){var x=b(g[0].date);n.valueOf()===x.valueOf()&&(w=g[0].value,g.shift())}var y=d(h.nullColor);null!==w&&w>0&&(y=d(h.baseColor,w/i));var z=$('<div class="day" style="background-color: '+y+';" />');z.attr("data-date",n.toISOString()),z.attr("data-value",w||0),h.highlightToday&&n.valueOf()===j.valueOf()&&z.addClass("today"),null===u&&(u=1===n.getDate()?n:null),n=b(c(n,-1)),t.prepend(z)}p.append(null!==u?$('<div class="month">'+h.i18n.months[u.getMonth()]+"</div>"):$('<div class="daySpacer" />')),q.prepend(t)}var A=$('<div class="daysOfWeek"></div>');A.append($('<div class="dayOfWeek">'+h.i18n.daysOfWeek[h.startOnSunday?6:0]+"</div>")),A.append($('<div class="dayOfWeek">'+h.i18n.daysOfWeek[h.startOnSunday?0:1]+"</div>")),A.append($('<div class="dayOfWeek">'+h.i18n.daysOfWeek[h.startOnSunday?1:2]+"</div>")),A.append($('<div class="dayOfWeek">'+h.i18n.daysOfWeek[h.startOnSunday?2:3]+"</div>")),A.append($('<div class="dayOfWeek">'+h.i18n.daysOfWeek[h.startOnSunday?3:4]+"</div>")),A.append($('<div class="dayOfWeek">'+h.i18n.daysOfWeek[h.startOnSunday?4:5]+"</div>")),A.append($('<div class="dayOfWeek">'+h.i18n.daysOfWeek[h.startOnSunday?5:6]+"</div>")),q.prepend(A),p.width(e(q)),p.append($('<br class="clear" />')),r.append($('<br class="clear" />')),this.html(o.html())}}();